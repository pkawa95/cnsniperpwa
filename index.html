<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />

  <!-- Viewport â€“ blokada zoomu + full screen PWA -->
  <meta
    name="viewport"
    content="
      width=device-width,
      initial-scale=1,
      maximum-scale=1,
      minimum-scale=1,
      user-scalable=no,
      viewport-fit=cover
    "
  />

  <title>Polowanie na Komiksy</title>

  <!-- Favicon klasyczny -->
  <link rel="icon" href="/assets/favicon.ico">

  <!-- Favicon PNG -->
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32.png">

  <!-- Apple iOS icons -->
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icon-120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icon-152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/assets/icon-167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icon-180.png">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#4fdfff">

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="CN Sniper">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>


<body>

  <!-- ğŸ” HEADER -->
  <header class="topbar">
    <div class="logo-bg"></div>
  </header>

<div id="healthBar" class="health-bar">
  <span class="dot offline"></span>
  <span id="healthText">ÅÄ…czenieâ€¦</span>
</div>
  <!-- ğŸ§  CONTENT -->
  <main>

    <!-- âœ… FOUND -->
    <section id="foundView" class="view active">
      <h2>Znalezione</h2>

      <!-- ğŸ” FILTERS -->
      <div class="filters">
        <div class="filters-row">
          <select id="sortSelect">
            <option value="newest">Najnowsze</option>
            <option value="oldest">Najstarsze</option>
          </select>

          <label class="checkbox">
            <input type="checkbox" id="gigantosCheck" />
            Gigantos
          </label>

          <input
            type="number"
            id="numberSearch"
            placeholder="Nr komiksu (np. 1, 2, 11)"
          />
        </div>

        <div class="filters-row">
          <div class="sources">
            <label><input type="checkbox" value="olx" checked /> OLX</label>
            <label><input type="checkbox" value="allegro" checked /> Allegro</label>
            <label><input type="checkbox" value="vinted" checked /> Vinted</label>
          </div>
        </div>
      </div>

      <!-- ğŸ§¾ OFFERS -->
      <div id="offers" class="offers"></div>
      <p id="wsStatus" class="muted"></p>
    </section>

    <!-- âŒ REJECTED -->
<section id="rejectedView" class="view">
  <h2>Odrzucone</h2>

  <!-- ğŸ§­ TABS -->
  <div class="stats-tabs">
    <button
      class="stats-tab active"
      data-rejected="junk"
      onclick="showRejectedView('junk')"
    >
      ğŸ—‘ï¸ Åšmieci
    </button>

    <button
      class="stats-tab"
      data-rejected="changes"
      onclick="showRejectedView('changes')"
    >
      ğŸ” Zmiany
    </button>
  </div>

  <!-- ğŸ§¾ REJECTED OFFERS -->
  <div id="rejectedOffers" class="offers"></div>

  <p id="rejectedStatus" class="muted"></p>
</section>



    <!-- ğŸ“Š STATS -->
    <section id="statsView" class="view">
      <h2>ğŸ“Š Statystyki</h2>

      <div class="stats-tabs">
        <button class="stats-tab active" data-view="global"
                onclick="showStatsView('global')">ğŸŒ Globalne</button>
        <button class="stats-tab" data-view="today"
                onclick="showStatsView('today')">ğŸ“… DziÅ›</button>
        <button class="stats-tab" data-view="weekly"
                onclick="showStatsView('weekly')">ğŸ“† TydzieÅ„</button>
      </div>

      <div id="statsDashboard"></div>
    </section>

    <!-- âš™ï¸ SETTINGS -->
    <section id="settingsView" class="view">
      <h2>Ustawienia</h2>

      <label>
        InterwaÅ‚ skanowania (sekundy)
        <input type="number" id="intervalInput" min="30" />
      </label>

      <button onclick="updateInterval()">Zapisz</button>
      <p id="intervalStatus" class="muted"></p>

      <hr class="sep" />

      <h3>WyrÃ³Å¼nianie numerÃ³w (1â€“40)</h3>
      <p class="muted">
        Zaznacz numery, ktÃ³re majÄ… dawaÄ‡ <b>zielonÄ… ramkÄ™</b>, jeÅ›li wystÄ…piÄ… w tytule.
      </p>

      <div id="highlightNumbers" class="numbers-grid"></div>
      <p id="highlightInfo" class="muted"></p>
      <hr class="sep" />

<h3>ğŸ”” Powiadomienia</h3>

<button
  id="pushBtn"
  class="push-btn"
  onclick="handleEnablePush()"
>
  ğŸ”” WÅ‚Ä…cz powiadomienia
</button>

<p id="pushStatus" class="muted"></p>


    </section>

  </main>

  <!-- ğŸ”» BOTTOM NAV -->
  <nav class="bottom-nav">
    <button onclick="showView('foundView')">Znalezione</button>
    <button onclick="showView('rejectedView')">Odrzucone</button>
    <button onclick="showView('statsView')">Statystyki</button>
    <button onclick="showView('settingsView')">Ustawienia</button>
  </nav>

  <!-- JS -->
  <script src="app.js"></script>
  <script src="stats.js"></script>
  <script src="subscribe.js"></script>

  <!-- SERVICE WORKER -->
  <script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js");
  }
    // iOS â€“ blokada pinch zoom
  document.addEventListener('gesturestart', e => e.preventDefault());
  document.addEventListener('gesturechange', e => e.preventDefault());
  document.addEventListener('gestureend', e => e.preventDefault());

  // blokada double-tap zoom
  let lastTouchEnd = 0;
  document.addEventListener('touchend', e => {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) {
      e.preventDefault();
    }
    lastTouchEnd = now;
  }, { passive: false });
  </script>

</body>
</html>
